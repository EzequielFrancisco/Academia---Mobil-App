ScreenManager:
    SplashScreen:
    InfoSplashScreen:
    HomeScreen:
    QuizScreen:
    FormScreen:
    MemoryScreen:


<SplashScreen>:
    name: "splash"

    MDBoxLayout:
        orientation: "vertical"
        padding: "40dp"
        spacing: "20dp"

        MDLabel:
            text: "A carregar..."
            halign: "center"
            font_style: "H4"

        MDProgressBar:
            id: progress_bar
            value: 90
            max: 100
            size_hint_y: None
            height: "6dp"

        MDLabel:
            text: "Por favor aguarde"
            halign: "center"

# --------------------info screen------------------------

<InfoSplashScreen>:
    name: "info_splash"

    MDBoxLayout:
        orientation: "vertical"
        padding: "40dp"
        spacing: "20dp"

        MDLabel:
            id: info_label
            text: ""

        MDProgressBar:
            id: progress_bar
            value: 90
            max: 100
            size_hint_y: None
            height: "6dp"


# ---------------------home screen------------------------
<HomeScreen>:
    name: "home"

    MDBoxLayout:
        orientation: "vertical"
        spacing: "0dp"
        
        MDTopAppBar:
            title: ""
            md_bg_color: 0.4627, 0.2196, 0.9804, 1  # #7638FA
            left_action_items: [["account", lambda x: app.on_profile(x)]]
            right_action_items: [["bell", lambda x: app.on_notification(x)], ["information", None, "Informação rápida sobre este módulo"]]
            size_hint_y: None
            height: "56dp"
            elevation: 0

        MDScrollView:
            do_scroll_x: False
            do_scroll_y: True
            bar_width: "8dp"
            bar_color: 0.4627, 0.2196, 0.9804, 0.8
            bar_inactive_color: 0.4627, 0.2196, 0.9804, 0.3
            
            MDBoxLayout:
                orientation: "vertical"
                spacing: "25dp"
                padding: ["20dp", "20dp", "20dp", "80dp"]
                size_hint_y: None
                height: self.minimum_height
                size_hint_x: 1
                
                # Seção do Carousel (Banner)
                MDBoxLayout:
                    orientation: "vertical"
                    size_hint: 1, None
                    height: "200dp"
                    md_bg_color: 0.4627, 0.2196, 0.9804, 1
                    radius: [25, 25, 25, 25]
                    padding: "10dp"
                    
                    Carousel:
                        id: carousel
                        direction: "right"
                        loop: True
                        size_hint: 1, 1
                        anim_type: "out_quad"
                        anim_duration: 0.3
                        
                        FitImage:
                            source: app.asset_path + "/2329993.jpg"
                            keep_ratio: False
                            allow_stretch: True
                        FitImage:
                            source: app.asset_path + "/7528944.jpg"
                            keep_ratio: False
                            allow_stretch: True
                        FitImage:
                            source: app.asset_path + "/physics6.jpg"
                            keep_ratio: False
                            allow_stretch: True

                # Primeira seção - Matérias Principais
                MDGridLayout:
                    cols: 3
                    spacing: "12dp"
                    size_hint_y: None
                    height: self.minimum_height
                    padding: ["2dp", "0dp", "5dp", "0dp"]

                    # Cards principais
                    MDCard:
                        size_hint: None, None
                        height: "100dp"
                        width: "100dp"
                        radius: [20, 20, 20, 20]
                        md_bg_color: 0.4627, 0.2196, 0.9804, 1
                        ripple_behavior: True
                        padding: "10dp"
                        on_release: app.on_subject_selected("Inglês")
                        
                        MDBoxLayout:
                            orientation: "vertical"
                            spacing: "8dp"
                            size_hint: 1, 1
                            MDIcon:
                                icon: "translate"
                                size_hint: None, None
                                size: "40dp", "40dp"
                                pos_hint: {"center_x": 0.5}
                                theme_text_color: "Custom"
                                text_color: 1, 1, 1, 1
                            MDLabel:
                                text: "Inglês"
                                halign: "center"
                                font_style: "Button"
                                bold: True
                    MDCard:
                        size_hint: None, None
                        height: "100dp"
                        width: "100dp"
                        radius: [20, 20, 20, 20]
                        md_bg_color: 0.4627, 0.2196, 0.9804, 1
                        ripple_behavior: True
                        padding: "10dp"
                        on_release: app.on_subject_selected("Inglês")
                        
                        MDBoxLayout:
                            orientation: "vertical"
                            spacing: "8dp"
                            size_hint: 1, 1
                            MDIcon:
                                icon: "function-variant"
                                size_hint: None, None
                                size: "40dp", "40dp"
                                pos_hint: {"center_x": 0.5}
                                theme_text_color: "Custom"
                                text_color: 1, 1, 1, 1
                            MDLabel:
                                text: "Fisica"
                                halign: "center"
                                font_style: "Button"
                                bold: True
                    MDCard:
                        size_hint: None, None
                        height: "100dp"
                        width: "100dp"
                        radius: [20, 20, 20, 20]
                        md_bg_color: 0.4627, 0.2196, 0.9804, 1
                        ripple_behavior: True
                        padding: "10dp"
                        on_release: root.screen_root("historia")
                        
                        MDBoxLayout:
                            orientation: "vertical"
                            spacing: "8dp"
                            size_hint: 1, 1
                            MDIcon:
                                icon: "book-open-variant"
                                size_hint: None, None
                                size: "40dp", "40dp"
                                pos_hint: {"center_x": 0.5}
                                theme_text_color: "Custom"
                                text_color: 1, 1, 1, 1
                            MDLabel:
                                text: "Historia"
                                halign: "center"
                                font_style: "Button"
                                bold: True
                    MDCard:
                        size_hint: None, None
                        height: "100dp"
                        width: "100dp"
                        radius: [20, 20, 20, 20]
                        md_bg_color: 0.4627, 0.2196, 0.9804, 1
                        ripple_behavior: True
                        padding: "10dp"
                        on_release: root.screen_root("memoria")
                        
                        MDBoxLayout:
                            orientation: "vertical"
                            spacing: "8dp"
                            size_hint: 1, 1
                            MDIcon:
                                icon: "brain"
                                size_hint: None, None
                                size: "40dp", "40dp"
                                pos_hint: {"center_x": 0.5}
                                theme_text_color: "Custom"
                                text_color: 1, 1, 1, 1
                            MDLabel:
                                text: "Memoria"
                                halign: "center"
                                font_style: "Button"
                                bold: True
                    MDCard:
                        size_hint: None, None
                        height: "100dp"
                        width: "100dp"
                        radius: [20, 20, 20, 20]
                        md_bg_color: 0.4627, 0.2196, 0.9804, 1
                        ripple_behavior: True
                        padding: "10dp"
                        on_release: app.on_subject_selected("biologia")
                        
                        MDBoxLayout:
                            orientation: "vertical"
                            spacing: "8dp"
                            size_hint: 1, 1
                            MDIcon:
                                icon: "leaf"
                                size_hint: None, None
                                size: "40dp", "40dp"
                                pos_hint: {"center_x": 0.5}
                                theme_text_color: "Custom"
                                text_color: 1, 1, 1, 1
                            MDLabel:
                                text: "Biologia"
                                halign: "center"
                                font_style: "Button"
                                bold: True
                    MDCard:
                        size_hint: None, None
                        height: "100dp"
                        width: "100dp"
                        radius: [20, 20, 20, 20]
                        md_bg_color: 0.4627, 0.2196, 0.9804, 1
                        ripple_behavior: True
                        padding: "10dp"
                        on_release: app.on_subject_selected("matematica")
                        
                        MDBoxLayout:
                            orientation: "vertical"
                            spacing: "8dp"
                            size_hint: 1, 1
                            MDIcon:
                                icon: "calculator"
                                size_hint: None, None
                                size: "40dp", "40dp"
                                pos_hint: {"center_x": 0.5}
                                theme_text_color: "Custom"
                                text_color: 1, 1, 1, 1
                            MDLabel:
                                text: "Matemática"
                                halign: "center"
                                font_style: "Button"
                                bold: True
                    


                # Segunda seção - Outras Matérias (Scroll Horizontal, centralizado)
                MDBoxLayout:
                    orientation: "vertical"
                    size_hint: 1, None
                    height: self.minimum_height
                    spacing: "2dp"
                    MDLabel:
                        text: "Seus Módulos"
                        font_style: "H6"
                        bold: True
                        size_hint_y: None
                        height: self.texture_size[1]
                        halign: "left"

                    ScrollView:
                        size_hint: 1, None
                        height: "140dp"
                        do_scroll_x: True
                        do_scroll_y: False
                        bar_width: "6dp"
                        bar_color: 0.4627, 0.2196, 0.9804, 0.8
                        bar_inactive_color: 0.4627, 0.2196, 0.9804, 0.3
                        
                        MDBoxLayout:
                            id: modulos_home_card
                            orientation: "horizontal"
                            spacing: "15dp"
                            size_hint_x: None
                            width: self.minimum_width
                            height: "130dp"
                            padding: ["10dp", "0dp", "10dp", "0dp"]
                            pos_hint: {"center_x": 0.5}  # centraliza horizontalmente

                            
                            MDCard:
                                size_hint: None, None
                                height: "90dp"
                                width: "90dp"
                                radius: [20, 20, 20, 20]
                                md_bg_color: 0.4627, 0.2196, 0.9804, 1
                                ripple_behavior: True
                                on_release: root.create_modules()

                                MDBoxLayout:
                                    orientation: "vertical"
                                    padding: "5dp"
                                    spacing: "0dp"
                                    size_hint: 1, 1
                                    MDIcon:
                                        icon: "plus"
                                        font_size: "60dp"  # define tamanho do ícone
                                        halign: "center"
                                        valign: "middle"
                                        pos_hint: {"center_x": 0.5, "center_y": 0.1}
                                        theme_text_color: "Custom"
                                        text_color: 1, 1, 1, 1



        MDBottomAppBar:
            MDTopAppBar:
                title: "Academia"
                icon: "plus"
                type: "bottom"
                on_action_button: root.on_plus()
                elevation: 0
                mode: "end"
                left_action_items: [["menu", lambda x: root.on_plus()]]
                size_hint_y: None
                height: "56dp"
                md_bg_color: 0.4627, 0.2196, 0.9804, 1
# ---------------------quiz screen------------------------
<QuizScreen>:
    name: "quiz"

    MDBoxLayout:
        orientation: "vertical"
        padding: "20dp"
        spacing: "20dp"
        MDTopAppBar:
            title: "Historia"
            md_bg_color: 0.4627, 0.2196, 0.9804, 1  # #7638FA
            left_action_items: [["arrow-left", lambda x: root.go_home()]]
            right_action_items: [["bell", lambda x: root.on_notification()],["information", None, "Informação rápida sobre este módulo"]]
            size_hint_y: None
            height: "56dp"
            elevation: 0 

        # Área da pergunta (altura fixa)
        MDBoxLayout:
            size_hint_y: None
            height: dp(120)
            md_bg_color: 0.2, 0.5, 0.9, 1
            radius: [20, 20, 20, 20]

            Label:
                id: label_quiz_question
                color: 1, 1, 1, 1
                font_size: "14sp"
                text: ""
                text_size: self.width, None  # define largura fixa para quebra de linha
                size_hint_y: None  # ajusta altura ao conteúdo
                halign: "center"                # alinhamento horizontal
                valign: "top"  

            MDFillRoundFlatButton:
                icon: "heart"
                text: "vidas 3"

        # Área das opções (cresce com o conteúdo)
        ScrollView:
            size_hint_y: 1   # ocupa todo o espaço restante
            MDGridLayout:
                id: containers_quiz_card
                cols: 2
                spacing: dp(10)
                padding: dp(10)
                size_hint_y: None
                adaptive_height: True


# ---------------------memory screen------------------------
<MemoryScreen>:
    name: "memory"

    MDBoxLayout:
        orientation: "vertical"
        padding: "20dp"
        spacing: "20dp"

        MDTopAppBar:
            title: "Melhorar Memória"
            md_bg_color: 0.4627, 0.2196, 0.9804, 1  # #7638FA
            left_action_items: [["arrow-left", lambda x: root.go_home()]]
            right_action_items: [["bell", lambda x: root.on_notification()],["information", None, "Informação rápida sobre este módulo"]]
            size_hint_y: None
            height: "56dp"
            elevation: 0  # sem sombra


        # Área da pergunta (altura fixa)
        MDBoxLayout:
            size_hint_y: None
            height: dp(120)
            md_bg_color: 0.2, 0.5, 0.9, 1
            radius: [20, 20, 20, 20]

            MDLabel:
                halign: "left"
                text_size: self.width, None
                color: 1, 1, 1, 1
                spacing: "4dp"
                halign: "center"
                font_size: "14sp"
                text: "Diga os proximos numeros da sequencia de Euler! e=2.?"

            MDFillRoundFlatButton:
                text: "e = 2.71828"

        ScrollView:
            size_hint_y: 1   
            MDGridLayout:
                id: containers_memory_card
                cols: 4
                spacing: dp(10)
                padding: dp(10)
                size_hint_y: None
                adaptive_height: True

                # Cards will be added dynamically here
            
        MDLabel:
            id: memory_label
            text: ""
            height: self.texture_size[1]
            size_hint_y: None
            halign: "center"
            font_style: "H6"
            bold: True
            
# ---------------------form screen------------------------
<FormScreen>:
    name: "form"
    MDScreen:

        MDBoxLayout:
            orientation: "vertical"
            padding: "20dp"
            spacing: "20dp"

            # Barra de topo
            MDTopAppBar:
                title: "Criar Quiz"
                md_bg_color: 0.4627, 0.2196, 0.9804, 1 # #dd38faff
                left_action_items: [["arrow-left", lambda x: root.go_home()]]
                right_action_items: [["bell", lambda x: root.on_info()],["information", None, "Para criar um quiz,\n preencha os campos abaixo, e selecione o modulo disponivel."]]
                size_hint_y: None
                height: "56dp"
                elevation: 0  # sem sombra

            # Campo para a pergunta
            MDTextField:
                id: question
                hint_text: "Cria uma pergunta"
                size_hint_x: 0.95
                pos_hint: {"center_x": 0.5}
                mode: "rectangle"
                line_color_focus: 0.4627, 0.2196, 0.9804, 1
                text_color: 0, 0, 0, 1
                helper_text: "Ex.: Qual é a capital de Portugal?"
                helper_text_mode: "on_focus"

            # Área das respostas
            ScrollView:
                size_hint_y: 0.5
                MDBoxLayout:
                    id: form_screen
                    orientation: "vertical"
                    spacing: "15dp"
                    padding: "10dp"
                    size_hint_y: None
                    height: self.minimum_height

            # Botões de ação
            MDBoxLayout:
                orientation: "horizontal"
                spacing: "20dp"
                size_hint_y: None
                height: "50dp"
                padding: "5dp"

                MDRaisedButton:
                    text: "Criar jogo"
                    md_bg_color: 0.4627, 0.2196, 0.9804, 1
                    text_color: 1, 1, 1, 1
                    elevation: 0  # sem sombra
                    on_release: root.submit_quiz()

                MDRaisedButton:
                    text: "questao"
                    icon: "plus"
                    md_bg_color: 0.4627, 0.2196, 0.9804, 1
                    text_color: 1, 1, 1, 1
                    elevation: 0  # sem sombra
                    on_release: root.create_quiz(1)

                MDRaisedButton:
                    id: btn_opcao
                    text: "Modulos"
                    md_bg_color: 0.4627, 0.2196, 0.9804, 1
                    text_color: 1, 1, 1, 1
                    elevation: 0  # sem sombra
                    on_release: root.menu_modulos()


            # Campo para resposta correta
            MDTextField:
                id: correct
                hint_text: "Indique o número da resposta correta"
                size_hint_x: 0.95
                pos_hint: {"center_x": 0.5}
                mode: "rectangle"
                line_color_focus: 0.4627, 0.2196, 0.9804, 1
                text_color: 0, 0, 0, 1
